<!DOCTYPE html>
<html lang="ar">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <link rel="manifest" href="manifest.json" />
	<script async src="https://cdn.jsdelivr.net/npm/pwacompat@2.0.8/pwacompat.min.js"
        integrity="sha384-uONtBTCBzHKF84F6XvyC8S0gL8HTkAPeCyBNvfLfsqHh+Kd6s/kaS4BdmNQ5ktp1"
        crossorigin="anonymous"></script>
    <script src="smain.js" type="module"></script>
    <title>Mavlid an-Nabi</title>
</head>

<body>
    <div class="header">
        <h1>Mavlid an-Nabi</h1>
        <div class="header_container">
            <img src="img/mosque.avif" alt="">
        </div>
    </div>
    <div class="main">
        <div class="main_container">
            <img src="img/Quranayats.webp" alt="">
            <p>1</p>
            <img src="img/1.webp" alt="">
            <img src="img/Salavat.webp" alt="">
            <p>2</p>
            <img src="img/2.webp" alt="">
            <img src="img/Salavat.webp" alt="">
            <p>3</p>
            <img src="img/3.webp" alt="">
            <img src="img/Salavat.webp" alt="">
            <p>4</p>
            <img src="img/4.webp" alt="">
            <img src="img/Salavat.webp" alt="">
            <p>5</p>
            <img src="img/5.webp" alt="">
            <img src="img/Salavat.webp" alt="">
            <p>6</p>
            <img src="img/6.webp" alt="">
            <img src="img/Salavat.webp" alt="">
            <p>7</p>
            <img src="img/7.webp" alt="">
            <img src="img/Salavat.webp" alt="">
            <p>8</p>
            <img src="img/8.webp" alt="">
            <img src="img/Salavat.webp" alt="">
            <p>9</p>
            <img src="img/9.webp" alt="">
            <img src="img/Salavat.webp" alt="">
            <p>10</p>
            <img src="img/10.webp" alt="">
            <img src="img/Salavat.webp" alt="">
            <p>11</p>
            <img src="img/11.webp" alt="">
            <img src="img/Salavat.webp" alt="">
            <p>12</p>
            <img src="img/12.webp" alt="">
            <img src="img/Salavat.webp" alt="">
            <p>13</p>
            <img src="img/13.webp" alt="">
            <img src="img/Salavat.webp" alt="">
            <p>14</p>
            <img src="img/14.webp" alt="">
            <img src="img/Salavat.webp" alt="">
            <p>15</p>
            <img src="img/15.webp" alt="">
            <img src="img/Salavat.webp" alt="">
            <p>16</p>
            <img src="img/16.webp" alt="">
            <img src="img/Salavat.webp" alt="">
            <p>17</p>
            <img src="img/DuaEnd.webp" alt="">
        </div>
    </div>
    <div class="footer">
        <h1>Mavlid an-Nabi</h1>
        <div class="footer_container"></div>
    </div>


    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <img src="Screen.png" alt="Add to Home Screen">
            <p>Для лучшего опыта использования, установите приложение на вашем устройстве. Нажмите кнопку "1-Поделиться"
                - "2-Добавить на главный экран" - "3-Добавить".</p>
        </div>
    </div>



    <!-- Модальное окно для установки PWA -->
    <div id="pwaModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <p>Установите PWA на вашем устройстве</p>
            <button id="installPWAButton">Установить</button>
        </div>
    </div>

    <script>
        let deferredPrompt;

        window.addEventListener('beforeinstallprompt', (event) => {
            console.log('Received beforeinstallprompt event', event);
            event.preventDefault();
            deferredPrompt = event;
            showInstallButton();
        });

        function showInstallButton() {
            const modal = document.getElementById('pwaModal');
            modal.style.display = 'block';

            modal.querySelector('#installPWAButton').onclick = function () {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    deferredPrompt.userChoice
                        .then((choiceResult) => {
                            if (choiceResult.outcome === 'accepted') {
                                console.log('User accepted the PWA installation');
                            } else {
                                console.log('User declined the PWA installation');
                            }
                            deferredPrompt = null;
                            modal.style.display = 'none';
                        })
                        .catch((error) => {
                            console.error('Error during PWA installation:', error);
                        });
                }
            };
        }

        document.querySelector('.close').onclick = function () {
            document.getElementById('pwaModal').style.display = 'none';
        };

        // Обработчик события для отправки команды установки PWA в сервис-воркер
        document.getElementById('installPWAButton').onclick = function () {
            if (navigator.serviceWorker && navigator.serviceWorker.controller) {
                navigator.serviceWorker.controller.postMessage('installPWA');
            }
        };
    </script>

    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw-worker.js')
                .then(reg => {
                    console.log('Service Worker registered');
                })
                .catch(error => {
                    console.error('Error registering Service Worker:', error);
                });
        }
    </script>

    <script src="main.js"></script>
	<script src="polyfills.js"></script>
	<script src="runtime.js"></script>
	<script src="js/copy.js"></script>
</body>

</html>